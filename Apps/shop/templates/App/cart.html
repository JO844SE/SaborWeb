<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" type="text/css">
    <title>Carrito</title>
</head>
<body>
<h1 class="mt-4">Ver pedidos</h1>
  <div class="mb-3 py-3">
    <a href="{% url 'shop:order_list' %}" class="btn btn-success"><i class="fas fa-plus"></i> Lista de pedidos</a>
  </div>
<div class="container py-4">
  <h2>Carrito</h2>
  {% if items %}
  <table class="table">
    <thead>
      <tr>
        <th>Imagen</th>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio</th>
        <th>Subtotal</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for it in items %}
      <tr>
        <td>
          {% if it.product.image %}
            <img src="{{ it.product.image }}" alt="{{ it.product.name }}" style="height:60px;" />
          {% else %}
            <img src="/static/img/recipe-1.jpg" style="height:60px;" />
          {% endif %}
        </td>
        <td>{{ it.product.name }}</td>
        <td>{{ it.quantity }}</td>
        <td>{{ it.product.price }}</td>
        <td>{{ it.line_total }}</td>
        <td>
          <a href="{% url 'shop:cart_remove' it.product.id %}" class="btn btn-sm btn-outline-danger">Eliminar</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="d-flex justify-content-between align-items-center">
    <h4>Total: {{ total }}</h4>
    <a href="{% url 'shop:checkout' %}" class="btn btn-primary">Finalizar compra</a>
  </div>
  {% else %}
    <p>El carrito está vacío.</p>
  {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
