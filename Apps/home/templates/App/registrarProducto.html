{% extends './base.html' %}
{% block content %}
  <h1 class="mt-4">Registrar Producto</h1>
  <div class="mb-3 py-3">
    <div class="body show border p-4 rounded-3 shadow-sm border-primary">
      <form method="POST" action="{% url 'registrarProducto' %}">
        {% csrf_token %}
        {% if messages %}
          <ul>
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }}" role="alert">{{ message }}</div>
            {% endfor %}
          </ul>
        {% endif %}

        <!-- Campo Nombre -->
        <div class="mb-3">
          <label for="nombre" class="form-label fw-bold">Nombre</label>
          <input type="text" class="form-control border-primary" value="{{ nombre }}" id="nombre" name="nombre" placeholder="Nombre del producto" required />
        </div>

        <!-- Campo Descripción -->
        <div class="mb-3">
          <label for="descripcion" class="form-label fw-bold">Descripción</label>
          <textarea class="form-control border-primary" id="descripcion" name="descripcion" rows="3" placeholder="Describe brevemente este producto..." required>{{ descripcion }}</textarea>
        </div>

        <!-- Campo Precio -->
        <div class="mb-3">
          <label for="precio" class="form-label fw-bold">Precio</label>
          <input type="number" step="0.01" class="form-control border-primary" value="{{ precio }}" id="precio" name="precio" placeholder="Precio del producto" required />
        </div>

        <!-- Campo Imagen (URL) -->
        <div class="mb-3">
          <label for="imagen" class="form-label fw-bold">Imagen (URL)</label>
          <input type="url" class="form-control border-primary" value="{{ imagen }}" id="imagen" name="imagen" placeholder="https://ejemplo.com/imagen.jpg" required />
          <div class="form-text">Proporciona la URL completa de la imagen del producto.</div>
        </div>

        <!-- Campo Categoría -->
        <div class="mb-3">
          <label for="categoria" class="form-label fw-bold">Categoría</label>
          <select class="form-select border-primary" id="categoria" name="categoria" required>

            <option value="" disabled {% if not categoria_id %}selected{% endif %}>Selecciona una categoría</option>
            {% for cat in categorias %}
                <option value="{{ cat.id }}" {% if cat.id == categoria_id %}selected{% endif %}>{{ cat.name }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Botones -->
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <button type="button" class="btn btn-outline-secondary" onclick="history.back()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Producto</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}
